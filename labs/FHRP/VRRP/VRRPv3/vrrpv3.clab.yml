name: VRRPv3

topology:
  nodes:
    server:
      kind: generic_vm
      image: vrnetlab/canonical_ubuntu:jammy
    Core-SW1:
      kind: cisco_vios
      type: switch
      image: vrnetlab/cisco_vios:L2-20200929
      startup-config: ../core-sw1-base-config.partial.txt
      stages:
        create:
          wait-for:
            - node: server
              stage: healthy
    R3:
      kind: cisco_vios
      type: router
      image: vrnetlab/cisco_vios:159-3.m8
      startup-config: r3-base-config.partial.txt
      stages:
        create:
          wait-for:
            - node: Core-SW1
              stage: healthy
    R2:
      kind: cisco_vios
      type: router
      image: vrnetlab/cisco_vios:159-3.m8
      startup-config: r2-base-config.partial.txt
      stages:
        create:
          wait-for:
            - node: R3
              stage: healthy
    R1:
      kind: cisco_vios
      type: router
      image: vrnetlab/cisco_vios:159-3.m8
      startup-config: r1-base-config.partial.txt
      stages:
        create:
          wait-for:
            - node: R2
              stage: healthy
    Edge-SW1:
      kind: cisco_vios
      type: switch
      image: vrnetlab/cisco_vios:L2-20200929
      startup-config: ../edge-sw1-base-config.partial.txt
      stages:
        create:
          wait-for:
            - node: R1
              stage: healthy
    Desktop-1:
      kind: generic_vm
      image: vrnetlab/canonical_ubuntu:jammy
    Desktop-2:
      kind: generic_vm
      image: vrnetlab/canonical_ubuntu:jammy

  links:
    - endpoints: ["server:eth1","Core-SW1:Gi3"]
    - endpoints: ["Core-SW1:Gi0","R1:Gi1"]
    - endpoints: ["Core-SW1:Gi1","R2:Gi1"]
    - endpoints: ["Core-SW1:Gi2","R3:Gi1"]
    - endpoints: ["Edge-SW1:Gi0","R1:Gi0"]
    - endpoints: ["Edge-SW1:Gi1","R2:Gi0"]
    - endpoints: ["Edge-SW1:Gi2","R3:Gi0"]
    - endpoints: ["Edge-SW1:Gi3","Desktop-1:eth1"]
    - endpoints: ["Edge-SW1:Gi4","Desktop-2:eth1"]
